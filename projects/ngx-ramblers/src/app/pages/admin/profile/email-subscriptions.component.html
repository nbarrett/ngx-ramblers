<app-page>
  <div class="row img-thumbnail" *ngIf="member">
    <div class="col-sm-3">
      <div class="item-panel-heading">
        <fa-icon [icon]="faEnvelopeOpenText" class="fa-5x ramblers"></fa-icon>
        <h5>Email subscriptions</h5>
      </div>
    </div>
    <div class="col col-sm-9">
      <div class="row">
        <div class="col col-sm-12 mt-2">
          <p>You can change your emailing preferences at any time using the subscription checkboxes
            below:</p>
          <div class="custom-control custom-checkbox" *ngIf="mailchimpConfig?.lists?.walks">
            <input [(ngModel)]="member.mailchimpLists.walks.subscribed" type="checkbox" class="custom-control-input"
                   name="walks-subscribed"
                   id="prof-subscribe-walks-emails">
            <label class="custom-control-label"
                   for="prof-subscribe-walks-emails">Walks emails
            </label>
          </div>
          <div class="custom-control custom-checkbox"*ngIf="mailchimpConfig?.lists?.socialEvents">
            <input [(ngModel)]="member.mailchimpLists.socialEvents.subscribed" type="checkbox"
                   class="custom-control-input"
                   name="social-events-subscribed"
                   id="prof-subscribe-social-events-emails">
            <label class="custom-control-label"
                   for="prof-subscribe-social-events-emails">Social events emails
            </label>
          </div>
          <div class="custom-control custom-checkbox"*ngIf="mailchimpConfig?.lists?.general">
            <input [(ngModel)]="member.mailchimpLists.general.subscribed" type="checkbox" class="custom-control-input"
                   name="general-subscribed"
                   id="prof-subscribe-general-emails">
            <label class="custom-control-label"
                   for="prof-subscribe-general-emails">General emails
            </label>
          </div>
          <p>If you have any other queries about your mailing preferences, please email our
            <app-contact-us role="membership"
                              text="Membership Secretary"></app-contact-us>
            </p>
          </div>
      </div>
      <div class="row">
        <div class="col col-sm-12">
          <input type="submit" [disabled]="false" value="Back to admin" (click)="profileService.backToAdmin()"
                 class="button-form button-form-left">
          <input type="submit" [disabled]="!member || notifyTarget.busy" value="Save Changes" (click)="saveContactPreferences()"
                 [ngClass]="member && !notifyTarget.busy? 'button-form button-form-left': 'disabled-button-form button-form-left'">
          <input type="submit" [disabled]="!member || notifyTarget.busy" value="Undo Changes" (click)="undoContactPreferences()"
                 [ngClass]="member && !notifyTarget.busy? 'button-form button-form-left': 'disabled-button-form button-form-left'">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col col-sm-12">
        <div class="alert {{notifyTarget.alertClass}} mt-3" *ngIf="notifyTarget.showAlert">
          <fa-icon [icon]="notifyTarget.alert.icon"></fa-icon><strong *ngIf="notifyTarget.alertTitle">
          {{notifyTarget.alertTitle}}: </strong> {{notifyTarget.alertMessage}}
          <div *ngIf="notifyTarget.showContactUs"> contact our
            <app-contact-us class="alert-link" role="membership"
                            text="Membership Administrator"></app-contact-us>.
          </div>
        </div>
      </div>
    </div>
  </div>
</app-page>
